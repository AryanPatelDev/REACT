// Remove export default and convert to regular JavaScript
window.searchableItems = [
  // Navigation Items
  { name: "Home", link: "index.html", type: "page" },
  { name: "Shop", link: "shop.html", type: "page" },
  { name: "About Us", link: "#anchor-about", type: "page" },
  { name: "Contact", link: "#anchor-contact", type: "page" },

  // Wheat Products
  {
    name: "Wheat Research Lokmani",
    image: "images/Wheat(Gehun)/lokmanipackage.png",
    category: "wheat",
    link: "shop.html#wheat",
  },
  {
    name: "Wheat Research Parikh Sharbati",
    image: "images/Wheat(Gehun)/sharbatipackage.png",
    category: "wheat",
    link: "shop.html#wheat",
  },
  {
    name: "Wheat Research Parikh Sharbati++",
    image: "images/Wheat(Gehun)/sharbati++package.png",
    category: "wheat",
    link: "shop.html#wheat",
  },
  {
    name: "Wheat Research Parikh Nilamani",
    image: "images/Wheat(Gehun)/nilamanipackage.png",
    category: "wheat",
    link: "shop.html#wheat",
  },

  // Bajra Products
  {
    name: "Bajra Namoh",
    image: "images/Millet(Bajra)/namohpackage.png",
    category: "bajra",
    link: "shop.html#bajra",
  },
  {
    name: "Bajra Parikh-169",
    image: "images/Millet(Bajra)/parikh169.jpg",
    category: "bajra",
    link: "shop.html#bajra",
  },
  {
    name: "SuperPrashant 44++",
    image: "images/Millet(Bajra)/superprashant44++package.png",
    category: "bajra",
    link: "shop.html#bajra",
  },
  {
    name: "Bajra Parikh 552",
    image: "images/Millet(Bajra)/bajra552package.png",
    category: "bajra",
    link: "shop.html#bajra",
  },

  // Moong Products
  {
    name: "Moong Neel",
    image: "images/GreenGram(Moong)/neelpackage.png",
    category: "moong",
    link: "shop.html#moong",
  },
  {
    name: "Moong Neel++",
    image: "images/GreenGram(Moong)/neel++package.png",
    category: "moong",
    link: "shop.html#moong",
  },

  // Urad Products
  {
    name: "Urad Shreenath",
    image: "images/BlackGram(UradDal)/shreenathpackage.png",
    category: "urad",
    link: "shop.html#urad",
  },
  {
    name: "Urad Super Fine",
    image: "images/BlackGram(UradDal)/superfinepackage.png",
    category: "urad",
    link: "shop.html#urad",
  },

  // Sesame Products
  {
    name: "Parikh Neer",
    image: "images/Sesame(Til)/neerpackage.png",
    category: "sesame",
    link: "shop.html#sesame",
  },
  {
    name: "Sesame Parth++",
    image: "images/Sesame(Til)/parth++package.png",
    category: "sesame",
    link: "shop.html#sesame",
  },

  // Sorghum Products
  {
    name: "Sorghum BumperGrass",
    image: "images/Sorghum(Jowar )/bumpergrasspackage.png",
    category: "sorghum",
    link: "shop.html#sorghum",
  },
  {
    name: "Sorghum SSG-788",
    image: "images/Sorghum(Jowar )/ps_ssj-788package.jpg.png",
    category: "sorghum",
    link: "shop.html#sorghum",
  },

  // Castor Products
  {
    name: "Castor Om Parikh",
    image: "images/Castor(Arandi)/ompackage.jpg",
    category: "castor",
    link: "shop.html#castor",
  },
  {
    name: "Castor Yoddha",
    image: "images/Castor(Arandi)/yoddhapackage.jpg",
    category: "castor",
    link: "shop.html#castor",
  },
  {
    name: "Castor Super Prashant 09",
    image: "images/Castor(Arandi)/superprashantpackage.jpg",
    category: "castor",
    link: "shop.html#castor",
  },

  // Other Products
  {
    name: "Cumin Heera",
    image: "images/Cumin(Jeera)/heerapackage.png",
    category: "cumin",
    link: "shop.html#cumin",
  },
  {
    name: "Fennel Parikh-23",
    image: "images/Fennel(Saunf)/parikh23package.jpg",
    category: "fennel",
    link: "shop.html#fennel",
  },
  {
    name: "Fennel Hariyali",
    image: "images/Fennel(Saunf)/hariyalipackage.jpg",
    category: "fennel",
    link: "shop.html#fennel",
  },
  {
    name: "Parikh Gangour",
    image: "images/GramSeeds(Chana)/gangourpackage.png",
    category: "gramseeds",
    link: "shop.html#gramseeds",
  },
  {
    name: "Groundnut Sona",
    image: "images/Groundnut/sonapackage.png",
    category: "groundnut",
    link: "shop.html#groundnut",
  },
  {
    name: "Groundnut Super Parikh 44++",
    image: "images/Groundnut/superparikh44++package.png",
    category: "groundnut",
    link: "shop.html#groundnut",
  },
  {
    name: "Isabgol Parikh Gold",
    image: "images/Isabgol/goldPackage.png",
    category: "isabgol",
    link: "shop.html#isabgol",
  },
  {
    name: "Mustard Parik-45",
    image: "images/Mustard (Sarson)/parikh45package.jpg",
    category: "mustard",
    link: "shop.html#mustard",
  },
  {
    name: "Mustard Parikh Mahi",
    image: "images/Mustard (Sarson)/parikhmahipackage.jpg",
    category: "mustard",
    link: "shop.html#mustard",
  },

  // Categories
  { name: "Wheat Seeds", category: "category", link: "shop.html#wheat" },
  { name: "Bajra Seeds", category: "category", link: "shop.html#bajra" },
  { name: "Moong Seeds", category: "category", link: "shop.html#moong" },
  { name: "Urad Dal Seeds", category: "category", link: "shop.html#urad" },
  { name: "Sesame Seeds", category: "category", link: "shop.html#sesame" },
  { name: "Sorghum Seeds", category: "category", link: "shop.html#sorghum" },
  { name: "Castor Seeds", category: "category", link: "shop.html#castor" },
  { name: "Cumin Seeds", category: "category", link: "shop.html#cumin" },
  { name: "Fennel Seeds", category: "category", link: "shop.html#fennel" },
  { name: "Gram Seeds", category: "category", link: "shop.html#gramseeds" },
  {
    name: "Groundnut Seeds",
    category: "category",
    link: "shop.html#groundnut",
  },
  { name: "Isabgol Seeds", category: "category", link: "shop.html#isabgol" },
  { name: "Mustard Seeds", category: "category", link: "shop.html#mustard" },

  // Alternative Names & Languages
  { name: "Gehun", link: "shop.html#wheat", type: "alternate" },
  { name: "Jowar", link: "shop.html#sorghum", type: "alternate" },
  { name: "Sarson", link: "shop.html#mustard", type: "alternate" },
  { name: "Til", link: "shop.html#sesame", type: "alternate" },
  { name: "Jeera", link: "shop.html#cumin", type: "alternate" },
  { name: "Saunf", link: "shop.html#fennel", type: "alternate" },
  { name: "Chana", link: "shop.html#gramseeds", type: "alternate" },
  { name: "Arandi", link: "shop.html#castor", type: "alternate" },
  { name: "Magfadi", link: "shop.html#groundnut", type: "alternate" },

  // Company Info
  { name: "Parikh Seeds", link: "index.html", type: "company" },
  { name: "Contact Us", link: "#anchor-contact", type: "company" },
  { name: "About Us", link: "#anchor-about", type: "company" },
  { name: "Our Products", link: "shop.html", type: "company" },
];

// Initialize search for index.html
window.initializeIndexSearch = function () {
  const searchBox = document.getElementById("search-box");
  const productsearch = document.getElementById("productsearch");

  if (!searchBox || !productsearch) return;

  searchBox.addEventListener("input", (e) => {
    const searchTerm = e.target.value.trim().toLowerCase();
    productsearch.innerHTML = "";

    if (!searchTerm) {
      productsearch.style.display = "none";
      return;
    }

    const matches = window.searchableItems.filter((item) =>
      item.name.toLowerCase().includes(searchTerm)
    );

    if (matches.length === 0) {
      productsearch.style.display = "none";
      return;
    }

    matches.forEach((item) => {
      const resultItem = document.createElement("div");
      resultItem.className = "productsearch-item";

      let content = `<a href="${item.link}" class="search-result-link">`;
      if (item.image) {
        content += `<img src="${item.image}" alt="${item.name}">`;
      }
      content += `<div class="productsearch-info">
        <div class="name">${item.name}</div>
        ${item.category ? `<div class="category">${item.category}</div>` : ""}
      </div></a>`;

      resultItem.innerHTML = content;
      productsearch.appendChild(resultItem);
    });

    productsearch.style.display = "block";
  });
};

// Initialize search for shop.html with reload functionality
window.initializeShopSearch = function () {
  const searchBox = document.getElementById("search-box");
  const productsearch = document.getElementById("productsearch");

  if (!searchBox || !productsearch) return;

  searchBox.addEventListener("input", (e) => {
    const searchTerm = e.target.value.trim().toLowerCase();
    productsearch.innerHTML = "";

    if (!searchTerm) {
      productsearch.style.display = "none";
      return;
    }

    const matches = window.searchableItems.filter((item) =>
      item.name.toLowerCase().includes(searchTerm)
    );

    if (matches.length === 0) {
      productsearch.style.display = "none";
      return;
    }

    matches.forEach((item) => {
      const resultItem = document.createElement("div");
      resultItem.className = "productsearch-item";

      let content = `<a href="${item.link}" class="search-result-link" onclick="window.location.href='${item.link}'; window.location.reload();">`;
      if (item.image) {
        content += `<img src="${item.image}" alt="${item.name}">`;
      }
      content += `<div class="productsearch-info">
        <div class="name">${item.name}</div>
        // ${item.category ? `<div class="category">${item.category}</div>` : ""}
      </div></a>`;

      resultItem.innerHTML = content;

      // Add click handler with reload
      resultItem.addEventListener("click", (e) => {
        e.preventDefault();
        window.location.href = item.link;
        window.location.reload();
      });

      productsearch.appendChild(resultItem);
    });

    productsearch.style.display = "block";
  });

  // Handle Enter key
  searchBox.addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
      const firstResult = productsearch.querySelector(".productsearch-item");
      if (firstResult) {
        const link = firstResult.querySelector("a").getAttribute("href");
        window.location.href = link;
        window.location.reload();
      }
    }
  });
};

// Initialize based on current page
document.addEventListener("DOMContentLoaded", () => {
  if (window.location.pathname.includes("shop.html")) {
    window.initializeShopSearch();
  } else {
    window.initializeIndexSearch();
  }

  // Close search results when clicking outside (common for both)
  document.addEventListener("click", (e) => {
    const productsearch = document.getElementById("productsearch");
    if (productsearch && !e.target.closest(".search-form")) {
      productsearch.style.display = "none";
    }
  });
});
